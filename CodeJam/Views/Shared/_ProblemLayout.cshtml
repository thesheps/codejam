<!DOCTYPE html>

<html>
<head>
    <link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.6/darkly/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shCoreDefault.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shCore.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/styles/shThemeRDark.min.css">
    <link href="~/Content/Site.css" rel="stylesheet" />
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shCore.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/SyntaxHighlighter/3.0.83/scripts/shBrushCSharp.min.js"></script>
</head>
<body>
    <style type="text/css">
        .syntaxhighlighter {
            overflow-y: hidden !important;
            overflow-x: auto !important;
        }
    </style>

    <nav class="navbar">
        <div class="container-fluid">
            <div class="navbar-header site-header">
                <h1>Code Jam</h1>
            </div>

            <div>
                <form class="navbar-form navbar-right login-form">
                    <div class="form-group" id="login-form">
                        <input type="text" class="form-control" id="emailAddress" placeholder="Email Address">
                        <button type="button" id="login" class="btn btn-default">Login</button>
                    </div>
                </form>
            </div>
        </div>

        <hr />
    </nav>

    @RenderBody()

    <script language='javascript'>
        function setCookie(cname, cvalue, exdays) {
            var d = new Date();
            d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
            var expires = "expires=" + d.toUTCString();
            document.cookie = cname + "=" + cvalue + "; " + expires;
        }

        function getCookie(cname) {
            var name = cname + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') {
                    c = c.substring(1);
                }
                if (c.indexOf(name) == 0) {
                    return c.substring(name.length, c.length);
                }
            }
            return "";
        }

        $(function () {
            SyntaxHighlighter.all();
            var emailAddress = getCookie("emailAddress");
            
            if (emailAddress) {
                $("#login-form").fadeOut();
            }

            $("#login").on("click", function () {
                emailAddress = $("#emailAddress").val();

                if (emailAddress) {
                    setCookie("emailAddress", emailAddress, 1);
                    $("#login-form").fadeOut();
                }
            });
        });
    </script>
</body>
</html>
